---
title: ‚úåÔ∏è Create Instance Options
description: A couple of options are available to customize the behavior of a Z-Fetch Instance.
---

Here is the list of all the available options and their default values when not specified.

<Callout title="Careful" type="error">
    These Options are only applicable when setting up a Z-Fetch instance. Not supported on per request basis.
</Callout>

## Core Configuration Options

| Option             | Description                                          | Use Case                                   | Default Value                                             |
| ------------------ | ---------------------------------------------------- | ------------------------------------------ | --------------------------------------------------------- |
| `baseUrl`          | Base URL for all requests                            | Set a common base URL for all API requests | `''`                                                      |
| `bearerToken`      | Bearer token for authentication                      | Authenticate requests with a bearer token  | `null`                                                    |
| `timeout`          | Request timeout in milliseconds                      | Set a timeout for requests                 | `90000`                                                   |
| `retry`            | Whether to retry failed requests                     | Automatically retry failed requests        | `false`                                                   |
| `maxRetries`       | Maximum number of retries                            | Set a limit on the number of retries       | `3`                                                       |
| `withCredentials`  | Whether to include credentials in requests           | Include credentials like cookies           | `false`                                                   |
| `withCache`        | Whether to use caching for GET requests              | Cache GET request responses                | `true`                                                    |
| `parseJson`        | Whether to parse response as JSON                    | Automatically parse JSON responses         | `true`                                                    |
| `stringifyPayload` | Whether to stringify request body                    | Automatically stringify request body       | `true`                                                    |
| `mode`             | CORS mode for requests                               | Set CORS mode (e.g., 'cors', 'no-cors')    | `'cors'`                                                  |
| `headers`          | Default headers for all requests                     | Set default headers                        | `{ 'Content-Type': 'application/json', 'Accept': '*/*' }` |

## üÜï Progress Tracking Options

| Option                | Description                                    | Use Case                                      | Default Value |
| --------------------- | ---------------------------------------------- | --------------------------------------------- | ------------- |
| `onUploadProgress`    | Callback for upload progress events           | Track file upload progress                    | `undefined`   |
| `onDownloadProgress`  | Callback for download progress events          | Track download/response progress              | `undefined`   |
| `useXHRForProgress`   | Force XMLHttpRequest usage for progress       | Override automatic XMLHttpRequest detection  | `false`       |

### Progress Tracking Example

```js
const api = createInstance({
  baseUrl: 'https://api.example.com',
  onUploadProgress: (event) => {
    const percentage = Math.round((event.loaded / event.total) * 100);
    console.log(`Upload: ${percentage}%`);
    updateProgressBar(percentage);
  },
  onDownloadProgress: (event) => {
    const percentage = Math.round((event.loaded / event.total) * 100);
    console.log(`Download: ${percentage}%`);
    updateDownloadBar(percentage);
  }
});
```

## Polling & Caching Options

| Option             | Description                                          | Use Case                                   | Default Value |
| ------------------ | ---------------------------------------------------- | ------------------------------------------ | ------------- |
| `startPolling`     | Whether to start polling automatically               | Enable automatic polling                   | `false`       |
| `stopPolling`      | Whether to stop polling automatically                | Disable polling after certain conditions   | `false`       |
| `pollingInterval`  | Interval between polls in milliseconds               | Set polling interval                       | `5000`        |
| `revalidateCache`  | Time in milliseconds before revalidating cached data | Refresh cached data after a specific time  | `10000`       |

## üÜï Error Handling Options

| Option         | Description                                    | Use Case                                      | Default Value |
| -------------- | ---------------------------------------------- | --------------------------------------------- | ------------- |
| `errorMapping` | Map status codes/patterns to custom messages  | Provide user-friendly error messages         | `undefined`   |

### Error Mapping Example

```js
const api = createInstance({
  baseUrl: 'https://api.example.com',
  errorMapping: {
    401: 'Authentication failed - please sign in again',
    403: 'Access denied - insufficient permissions',
    404: 'Resource not found',
    500: 'Server error - please try again later',
    'fetch failed': 'Network connection failed - check your internet',
    'timeout': 'Request timed out - please try again'
  }
});
```

## üÜï Hooks Configuration

| Option  | Description                                    | Use Case                                      | Default Value |
| ------- | ---------------------------------------------- | --------------------------------------------- | ------------- |
| `hooks` | Request/response/error lifecycle hooks        | Intercept and modify requests/responses/errors | `{}`         |

### Available Hooks

- **`onRequest`** - Modify requests before they're sent
- **`onResponse`** - Transform responses before they're returned  
- **`onError`** - Handle and modify all error types

### Hooks Example

```js
const api = createInstance({
  baseUrl: 'https://api.example.com',
  hooks: {
    onRequest: async (context) => {
      // Add authentication using helper methods
      const token = localStorage.getItem('auth_token');
      if (token) {
        context.setHeaders(headers => ({
          ...headers,
          'Authorization': `Bearer ${token}`
        }));
      }
    },
    
    onResponse: async ({ result }) => {
      // Transform successful responses
      if (result?.data) {
        return {
          result: {
            ...result,
            data: {
              ...result.data,
              processedAt: new Date().toISOString()
            }
          }
        };
      }
      return { result };
    },
    
    onError: (context) => {
      // Handle authentication errors
      if (context.error?.status === 401) {
        localStorage.removeItem('auth_token');
        context.setError({
          message: 'Session expired. Please login again.',
          status: 'AUTH_EXPIRED'
        });
      }
    }
  }
});
```

## Complete Configuration Example

```js
import { createInstance } from '@z-fetch/fetch';

const api = createInstance({
  // Core options
  baseUrl: 'https://api.example.com',
  bearerToken: 'your-auth-token',
  timeout: 30000,
  retry: true,
  maxRetries: 3,
  withCredentials: true,
  withCache: true,
  parseJson: true,
  stringifyPayload: true,
  mode: 'cors',
  headers: {
    'Content-Type': 'application/json',
    'X-API-Version': '1.0'
  },
  
  // Progress tracking
  onUploadProgress: (event) => {
    console.log(`Upload: ${Math.round(event.loaded/event.total*100)}%`);
  },
  onDownloadProgress: (event) => {
    console.log(`Download: ${Math.round(event.loaded/event.total*100)}%`);
  },
  
  // Error mapping
  errorMapping: {
    401: 'Authentication failed',
    403: 'Access denied',
    404: 'Resource not found',
    500: 'Server error',
    'fetch failed': 'Network error'
  },
  
  // Hooks
  hooks: {
    onRequest: async (context) => {
      context.setHeaders(headers => ({
        ...headers,
        'X-Request-ID': crypto.randomUUID()
      }));
    },
    
    onResponse: async ({ result }) => {
      // Add metadata to responses
      if (result?.data) {
        return {
          result: {
            ...result,
            data: {
              ...result.data,
              _timestamp: Date.now()
            }
          }
        };
      }
      return { result };
    },
    
    onError: (context) => {
      // Custom error handling
      console.error('API Error:', context.error);
      
      if (context.error?.status === 'NETWORK_ERROR') {
        context.setError({
          message: 'Connection failed. Please check your internet.',
          status: 'CONNECTION_ERROR'
        });
      }
    }
  }
});
```

ü§î What about individual request options? See [request methods](/docs/methods) for more details.

And if you think there's something missing, feel free to open an issue on our GitHub repository.
